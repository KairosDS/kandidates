<link rel="import" href="../../../bower_components/polymer/polymer.html"/>
<dom-module name="candidate-item">

  <style>
    /* General */
    .candidate-item {
      display: block;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 1px 1px rgba(0,0,0,.05);
      padding: 15px;
    }
    .candidate-item {
      border: 0;
    }
    .candidate-item > div {
      display: inline-block;
      padding: 0;
    }

    /* Display in rows */
    .candidate-list .candidate-item {
      display: table-row;
      border-radius: 0;
      box-shadow: none;
      border: 0 solid black;
      border-top-width: 1px;
      border-bottom-width: 1px;
      padding: 3px;
    }
    .candidate-list .candidate-item:first-child {
      border-top-width: 0;
    }
    .candidate-list .candidate-item:last-child {
      border-bottom-width: 0;
    }
    .candidate-list .candidate-item > div {
      display: table-cell;
    }
    .candidate-list .candidate-item .extra {
      display: none;
    }

    /* Inner styling */
    .personal {
      font-weight: bold;
    }
    .personal .name {
      font-style: italic;
    }

    /* Status styling */
    .status-grayed {
      color: #777;
    }
    .status-oblique {
      font-style: italic;
    }
    .status-down {
      color: #3c763d;
      font-style: italic;
    }
    .status-info {
      color: #31708f;
    }
    .status-warn {
      color: #8a6d3b;
    }
    .status-good {
      color: #3c763d;
    }
  </style>

  <template>
    <div class="candidate-item">
      <div class="personal"><span class="surname">{{surname}}</span>, <span class="name">{{name}}</span></div>
      <div class="years"><span>{{years}}</span></div>
      <div class="status"><span class="{{styleStatus(status)}}">{{makeStatus(status)}}</span></div>
      <div class="category">{{category}}</div>
      <div class="extra"><content></content></div>
    </div>
  </template>

  <script type="text/javascript">
    var getStatus = function (status) {
      if(status < statusCodes.length)
        return statusCodes[status];
      throw Error('invalid status code');
    };
    var statusCodes = [
      {'cType': 'notyet', 'cValue': 'Not contacted'},
      {'cType': 'waiting', 'cValue': 'Waiting for reply'},
      {'cType': 'moreinfo', 'cValue': 'Wants more info'},
      {'cType': 'meetingreq', 'cValue': 'Meeting requested'},
      {'cType': 'meetingsched', 'cValue': 'Meeting scheduled'},
      {'cType': 'evaluating', 'cValue': 'Evaluating'},
      {'cType': 'accepted', 'cValue': 'Accepted'},
      {'cType': 'signed', 'cValue': 'Signed'},
      {'cType': 'nexttime', 'cValue': 'Wait some time'},
      {'cType': 'off', 'cValue': 'Discarded'}
    ];

    Polymer({
      is: 'candidate-item',
      properties: {
        surname: {
          type: String,
          value: 'Surame'
        },
        name: {
          type: String,
          value: 'Name'
        },
        years: {
          type: Number,
          value: 1
        },
        status: {
          type: Number,
          value: 0
        },
        category: {
          type: String,
          value: 'Catg'
        }
      },
      styleStatus: function (status) {
        var currentStatus = getStatus(status);
        switch(currentStatus.cType) {
          case 'waiting':
          case 'meetingreq':
          case 'meetingsched':
            return 'status-info';
          case 'moreinfo':
          case 'evaluating':
            return 'status-warn';
          case 'signed':
          case 'accepted':
            return 'status-good';
          case 'off':
            return 'status-down';
          case 'notyet':
            return 'status-grayed status-oblique';
          case 'nexttime':
          default:
            return 'status-grayed';
        };
      },
      makeStatus: function (status) {
        return getStatus(status).cValue;
      }
    });
  </script>

</dom-module>